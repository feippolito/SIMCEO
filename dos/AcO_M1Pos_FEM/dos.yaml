simulation:
  sampling frequency: 2000
  duration: 20
  server:
    IP: 127.0.0.1

drivers:
  M1:
    delay: 0
    sampling_rate: 2000
    inputs:
      Txyz:
        lien: [AcO_controller, M1 Txyz]
      Rxyz:
        lien: [AcO_controller, M1 Rxyz]
      modes:
        lien: [AcO_controller, M1 BM]

  M2:
    delay: 0
    sampling_rate: 2000
    inputs:
      Txyz:
        lien: [AcO_controller ,M2 Txyz]
      Rxyz:
        lien: [AcO_controller ,M2 Rxyz]

  wfs48:
    delay: 0
    sampling_rate: 2000
    outputs:
      M12_RBM:
        sampling_rate: 2000
        size: 273
        logs: {decimation: 2000}

  AcO_controller_debug:
    server: false
    sampling_rate: 2000
    inputs:
      x_hat:
        lien: [wfs48, M12_RBM]
    shape: [7, 39]
    split:
      indices_or_sections: [6, 9, 12]
      axis: 1
    outputs:
      M1 TxyzRxyz_d:
        size: [7, 6]
        sampling_rate: 2000
        logs: {decimation: 2000}
      M2 Txyz_d:
        size: [7, 3]
        sampling_rate: 2000
        logs: {decimation: 2000}
      M2 Rxyz_d:
        sampling_rate: 2000
        size: [7, 3]
        logs: {decimation: 2000}
      M1 BM_d:
        size: [7, 27]
        sampling_rate: 2000
        logs: {decimation: 2000}

  AcO_controller:
    server: false
    sampling_rate: 2000
    inputs:
      x_hat:
        lien: [wfs48, M12_RBM]
    shape: [7, 39]
    split:
      indices_or_sections: [3, 6, 9, 12]
      axis: 1
    outputs:
      M1 Txyz:
        size: [7, 3]
        sampling_rate: 2000
        logs: {decimation: 2000}
      M1 Rxyz:
        size: [7, 3]
        sampling_rate: 2000
        logs: {decimation: 2000}
      M2 Txyz:
        size: [7, 3]
        sampling_rate: 2000
        logs: {decimation: 2000}
      M2 Rxyz:
        sampling_rate: 2000
        size: [7, 3]
        logs: {decimation: 2000}
      M1 BM:
        size: [7, 27]
        sampling_rate: 2000
        logs: {decimation: 2000}

  M1PosDebug0:
    sampling_rate: 1
    server: false
    inputs:
      TxyzRxyz:
        lien: [AcO_controller_debug, M1 TxyzRxyz_d]
    split:
      indices_or_sections: 2
      axis: 1
    outputs:
      M1Pos_DeltaF:
        size: 42
        logs: {decimation: 1}
        lien: [FEM, OSS_Harpoint_delta_F]
      M1Pos_io:
        size: 42
        logs: {decimation: 1}

  FEM:
    inputs:
      OSS_Harpoint_delta_F:
        size: 42
    outputs:
        OSS_M1_lcl:
          size: 42
          logs: {decimation: 1}

COMMENTS:
  science:
    outputs:
      wfe_rms:
        size: 1
        #logs: {decimation: 1}
      segment_wfe_rms:
        size: 7
        #logs: {decimation: 1}
      PSSn:
        size: 1
        #logs: {decimation: 1}
      tiptilt:
        size: 2
        #logs: {decimation: 1}
      segment_piston:
        size: 7
        #logs: {decimation: 1}
      segment_tiptilt:
        size: 14
        logs: {decimation: 1}